# RWeb Counter for Selenium Testing
# Uses data-testid attributes for element selection

use stdlib.rweb
use stdlib.rhtml

reactive Counter = { value: Int }

session() = {
    counter = Counter(0)

    (
        # renderPage
        () => RHtml(div([
            h1("RWeb Counter Test"),
            component("display", () => RHtml(
                div([
                    span("Count: "),
                    span(show(counter.value))
                ], dataTestid: "count")
            )),
            div([
                button("+", dataAction: "inc", dataTestid: "increment"),
                button("-", dataAction: "dec", dataTestid: "decrement"),
                button("Reset", dataAction: "reset", dataTestid: "reset")
            ])
        ])),
        # onAction
        (action, params) => match action {
            "inc" -> { counter.value = counter.value + 1 }
            "dec" -> { counter.value = counter.value - 1 }
            "reset" -> { counter.value = 0 }
            _ -> ()
        }
    )
}

main() = startRWeb(8095, "RWeb Counter Test", session)

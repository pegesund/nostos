# expect: ()
# GC handles shared references correctly (same object referenced multiple times)

make_shared(n) = {
    shared = [1, 2, 3, 4, 5]
    garbage = [99, 88, 77]
    # Multiple references to same list
    (shared, shared, shared)
}

sum_list([]) = 0
sum_list([h | t]) = h + sum_list(t)

process(0, acc) = acc
process(n, acc) = {
    garbage = ([0], [0], [0])
    (a, b, c) = make_shared(n)
    total = sum_list(a) + sum_list(b) + sum_list(c)
    process(n - 1, acc + total)
}

main() = {
    result = process(100, 0)
    # Each iteration: 15 * 3 = 45, 100 iterations = 4500
    assert_eq(4500, result)
}

# expect: 0
# Pattern matching in catch clauses

classify(code) =
    try {
        if code == 1 then throw("not_found")
        else if code == 2 then throw("forbidden")
        else "ok"
    } catch {
        "not_found" -> "not_found"
        "forbidden" -> "forbidden"
        _ -> "error"
    }

main() = {
    assert_eq("not_found", classify(1))
    assert_eq("forbidden", classify(2))
    assert_eq("ok", classify(99))
    0
}

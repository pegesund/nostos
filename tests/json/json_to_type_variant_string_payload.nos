# expect: hello world
# Test jsonToType with string payload in variant
use stdlib.json.{jsonParse, jsonStringify}
type Message = TextMsg(String) | Binary(Int)

getText(TextMsg(s)) = s
getText(Binary(_)) = "binary"

main() = {
    json = jsonParse("{\"TextMsg\": \"hello world\"}")
    msg = jsonToType[Message](json)
    getText(msg)
}

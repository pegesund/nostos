# expect: 10
# Lambda that captures mvar - SAFE (read-read pattern)

mvar value: Int = 0

get_value() = value

make_adder() = {
    # SAFE: lambda reads value, and calls get_value which also reads value
    # Multiple readers are allowed with RwLock semantics
    x => x + get_value() + value
}

main() = {
    f = make_adder()
    f(10)
}

# expect: 0
# Spawn multiple children and collect their results

worker(parent, n) = {
    parent <- n * 2
}

main() = {
    me = self()
    spawn { worker(me, 5) }
    spawn { worker(me, 10) }

    # Receive both results and sum them
    result = receive { a -> receive { b -> a + b } }
    assert_eq(30, result)
    0
}

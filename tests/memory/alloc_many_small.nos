# expect: 1000
# Allocate many small objects

make_list(n, acc) =
    if n <= 0 then acc
    else make_list(n - 1, [n | acc])

count(list, acc) =
    match list
        [] -> acc
        [_ | rest] -> count(rest, acc + 1)
    end

main() = {
    list = make_list(1000, [])
    count(list, 0)
}

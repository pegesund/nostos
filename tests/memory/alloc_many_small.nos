# expect: 1000
# Allocate many small objects

make_list(n, acc) =
    if n <= 0 then acc
    else make_list(n - 1, [n | acc])

countList(list, acc) =
    match list {
        [] -> acc
        [_ | rest] -> countList(rest, acc + 1)
    }

main() = {
    list = make_list(1000, [])
    countList(list, 0)
}

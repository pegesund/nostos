# expect: 0
# Test Server.matchPath routing helper

main() = {
    # Test matching with params
    params1 = Server.matchPath("/users/123/posts/456", "/users/:id/posts/:postId")
    assert_eq(length(params1), 2)
    (k1, v1) = head(params1)
    assert_eq(k1, "id")
    assert_eq(v1, "123")
    (k2, v2) = head(tail(params1))
    assert_eq(k2, "postId")
    assert_eq(v2, "456")

    # Test exact match without params
    params2 = Server.matchPath("/api/health", "/api/health")
    assert_eq(length(params2), 0)

    # Test no match - wrong segment
    params3 = Server.matchPath("/users/123", "/posts/:id")
    assert_eq(length(params3), 0)

    # Test no match - different length
    params4 = Server.matchPath("/users/123/extra", "/users/:id")
    assert_eq(length(params4), 0)

    # Test single param
    params5 = Server.matchPath("/items/abc", "/items/:name")
    assert_eq(length(params5), 1)
    (k5, v5) = head(params5)
    assert_eq(k5, "name")
    assert_eq(v5, "abc")

    0
}

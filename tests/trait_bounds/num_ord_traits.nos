# expect: 0
# Test Num and Ord trait bounds with generic functions

# Generic function with Num trait bound
doubleIt[T: Num](x: T) -> T = x + x

# Generic max function
maxOf[T: Ord](a: T, b: T) -> T = if a > b then a else b

# Generic min function
minOf[T: Ord](a: T, b: T) -> T = if a < b then a else b

# Combined traits
clamp[T: Num + Ord](x: T, low: T, high: T) -> T =
    if x < low then low
    else if x > high then high
    else x

main() = {
    # Test doubleIt with Int
    assert_eq(10, doubleIt(5))
    assert_eq(-4, doubleIt(-2))
    assert_eq(0, doubleIt(0))

    # Test doubleIt with Float
    assert_eq(6.0, doubleIt(3.0))

    # Test maxOf/minOf with Int
    assert_eq(10, maxOf(5, 10))
    assert_eq(5, minOf(5, 10))
    assert_eq(10, maxOf(10, 5))
    assert_eq(5, minOf(10, 5))

    # Test maxOf/minOf with Float
    assert_eq(3.0, maxOf(1.0, 3.0))
    assert_eq(1.0, minOf(1.0, 3.0))

    # Test clamp with Int
    assert_eq(5, clamp(3, 5, 10))   # below min
    assert_eq(7, clamp(7, 5, 10))   # in range
    assert_eq(10, clamp(15, 5, 10)) # above max

    # Test clamp with Float
    assert_eq(1.0, clamp(0.5, 1.0, 10.0))
    assert_eq(5.5, clamp(5.5, 1.0, 10.0))
    assert_eq(10.0, clamp(15.0, 1.0, 10.0))

    0
}

# expect: 0
# Test Exec.spawn and Exec.wait

main() = {
    # Spawn a process that exits immediately with code 0
    handle = Exec.start("true", [])

    # Wait for it to exit
    exitCode = Exec.wait(handle)

    # true should exit with 0
    assert(exitCode == 0)

    # Spawn a process that exits with non-zero
    handle2 = Exec.start("false", [])

    exitCode2 = Exec.wait(handle2)

    # false should exit with 1
    assert(exitCode2 == 1)

    0
}

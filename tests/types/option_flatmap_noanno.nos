# expect: 0
# Option.flatMap/map dispatch without type annotations
safeHead(xs) = if xs.length() == 0 then None else Some(xs.head())
main() = {
  data = [3, -1, 5]
  r1 = safeHead(data).flatMap(n => if n > 0 then Some(n * 10) else None)
  assert_eq(Some(30), r1)

  r2 = safeHead(data).map(n => n + 100)
  assert_eq(Some(103), r2)

  r3 = safeHead([])
  assert_eq(None, r3)
  0
}

# expect: 0
# Named parameters with block bodies

# Function with block body
compute(a, b, c = 0) = {
    sum = a + b
    product = a * b
    sum + product + c
}

test1() = compute(2, 3) == 11
test2() = compute(2, 3, 10) == 21
test3() = compute(a: 2, b: 3) == 11
test4() = compute(a: 2, b: 3, c: 5) == 16
test5() = compute(c: 100, a: 1, b: 1) == 103

# Block with conditionals
classify(x, threshold = 0) = {
    diff = x - threshold
    if diff > 0 then "above"
    else if diff < 0 then "below"
    else "equal"
}

test6() = classify(10) == "above"
test7() = classify(-5) == "below"
test8() = classify(0) == "equal"
test9() = classify(5, 10) == "below"
test10() = classify(x: 10, threshold: 10) == "equal"

# Range with step using recursion
rangeStep(start, stop, step = 1) =
    if start >= stop then []
    else [start] ++ rangeStep(start + step, stop, step)

test11() = rangeStep(0, 5) == [0, 1, 2, 3, 4]
test12() = rangeStep(0, 10, 2) == [0, 2, 4, 6, 8]
test13() = rangeStep(start: 1, stop: 6, step: 2) == [1, 3, 5]

main() = {
    results = [test1(), test2(), test3(), test4(), test5(),
               test6(), test7(), test8(), test9(), test10(),
               test11(), test12(), test13()]
    passed = results.filter(r => r)
    if length(passed) == 13 then 0 else 1
}

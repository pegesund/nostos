# expect: 0
# Named/default params with recursion (simulating while loops)

# Count using recursion
countUpRec(start = 0, stop = 10, count = 0) =
    if start >= stop then count
    else countUpRec(start + 1, stop, count + 1)

test1() = countUpRec() == 10
test2() = countUpRec(5) == 5
test3() = countUpRec(0, 5) == 5
test4() = countUpRec(start: 3, stop: 8) == 5
test5() = countUpRec(stop: 20) == 20

# Sum with step using recursion
sumRangeRec(start = 1, stop = 10, step = 1, total = 0) =
    if start > stop then total
    else sumRangeRec(start + step, stop, step, total + start)

test6() = sumRangeRec() == 55  # 1+2+...+10
test7() = sumRangeRec(1, 5) == 15  # 1+2+3+4+5
test8() = sumRangeRec(step: 2) == 25  # 1+3+5+7+9
test9() = sumRangeRec(start: 2, stop: 10, step: 2) == 30  # 2+4+6+8+10

# Collect values using recursion
collectRec(start = 0, count = 5, pred = _ => true, acc = [], idx = 0) =
    if idx >= count then acc
    else if pred(start) then collectRec(start + 1, count, pred, acc ++ [start], idx + 1)
    else collectRec(start + 1, count, pred, acc, idx)

test10() = collectRec() == [0, 1, 2, 3, 4]
test11() = collectRec(10, 3) == [10, 11, 12]
test12() = collectRec(pred: x => x % 2 == 0) == [0, 2, 4, 6, 8]
test13() = collectRec(start: 1, count: 4, pred: x => x % 2 == 1) == [1, 3, 5, 7]

main() = {
    results = [test1(), test2(), test3(), test4(), test5(),
               test6(), test7(), test8(), test9(), test10(),
               test11(), test12(), test13()]
    passed = results.filter(r => r)
    if length(passed) == 13 then 0 else 1
}

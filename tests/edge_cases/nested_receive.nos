# expect: 3
# Nested receive expressions

worker(parent) = {
    parent <- 1
    parent <- 2
}

main() = {
    me = self()
    spawn { worker(me) }

    first = receive { x -> x }
    second = receive { x -> x }
    first + second
}

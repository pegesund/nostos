# expect: "passed"
type Address = { city: String, zip: Int } deriving (Hash + Eq + Show)
type Person = { name: String, addr: Address } deriving (Hash + Eq + Show)

main() = {
    addr1 = Address("NYC", 10001)
    addr2 = Address("NYC", 10001)
    addr3 = Address("LA", 90001)

    p1 = Person("Alice", addr1)
    p2 = Person("Alice", addr2)
    p3 = Person("Alice", addr3)

    # Address equality
    assert(addr1 == addr2)
    assert(addr1 != addr3)

    # Person with nested address
    assert(p1 == p2)
    assert(p1 != p3)

    # Hash consistency
    assert(hash(p1) == hash(p2))
    assert(hash(p1) != hash(p3))

    "passed"
}

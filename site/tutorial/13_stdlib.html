<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Standard Library - Nostos Tutorial</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <style>
        .hljs-operator {
            color: #e06c75;
        }
        .hljs-function {
            color: #e5c07b;
        }
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        nostos: {
                            dark: '#0f172a',
                            primary: '#3b82f6',
                            accent: '#10b981',
                            code: '#1e293b'
                        }
                    },
                    fontFamily: {
                        mono: ['ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', "Liberation Mono", "Courier New", 'monospace'],
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-slate-900 text-slate-200 font-sans antialiased">

    <!-- Navbar -->
    <nav class="border-b border-slate-800 bg-slate-900/80 backdrop-blur fixed w-full z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center">
                    <a href="../index.html" class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-emerald-400">Nostos</a>
                    <span class="ml-4 text-slate-400 border-l border-slate-700 pl-4 text-sm font-medium">Tutorial</span>
                </div>
                <div class="flex space-x-6">
                    <a href="../index.html" class="text-slate-400 hover:text-white transition">Home</a>
                    <a href="https://github.com/pegesund/nostos" class="text-slate-400 hover:text-white transition">GitHub</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="pt-16 flex min-h-screen">

        <!-- Sidebar -->
        <aside class="w-64 fixed h-full border-r border-slate-800 bg-slate-900 overflow-y-auto hidden md:block">
            <div class="p-6">
                <h3 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-4">Contents</h3>
                                <ul class="space-y-3">
                    <li><a href="01_basics.html" class="block text-slate-400 hover:text-white transition">1. Basics</a></li>
                    <li><a href="02_functions.html" class="block text-slate-400 hover:text-white transition">2. Functions</a></li>
                    <li><a href="03_pattern_matching.html" class="block text-slate-400 hover:text-white transition">3. Pattern Matching</a></li>
                    <li><a href="04_lists_tuples.html" class="block text-slate-400 hover:text-white transition">4. Lists & Tuples</a></li>
                    <li><a href="05_maps_sets.html" class="block text-slate-400 hover:text-white transition">5. Maps & Sets</a></li>
                    <li><a href="06_typed_arrays.html" class="block text-slate-400 hover:text-white transition">6. Typed Arrays</a></li>
                    <li><a href="07_type_system.html" class="block text-slate-400 hover:text-white transition">7. Type System</a></li>
                    <li><a href="08_traits.html" class="block text-slate-400 hover:text-white transition">8. Traits</a></li>
                    <li><a href="09_builtin_traits.html" class="block text-slate-400 hover:text-white transition">9. Builtin Traits</a></li>
                    <li><a href="10_trait_bounds.html" class="block text-slate-400 hover:text-white transition">10. Trait Bounds</a></li>
                    <li><a href="11_error_handling.html" class="block text-slate-400 hover:text-white transition">11. Error Handling</a></li>
                    <li><a href="12_modules.html" class="block text-slate-400 hover:text-white transition">12. Modules & Imports</a></li>
                    <li><a href="13_stdlib.html" class="block text-blue-400 font-medium">13. Standard Library</a></li>
                    <li><a href="14_json.html" class="block text-slate-400 hover:text-white transition">14. JSON</a></li>
                    <li><a href="15_concurrency.html" class="block text-slate-400 hover:text-white transition">15. Concurrency</a></li>
                    <li><a href="16_async_runtime.html" class="block text-slate-400 hover:text-white transition">16. Async Runtime</a></li>
                    <li><a href="17_async_io_http.html" class="block text-slate-400 hover:text-white transition">17. Async I/O & HTTP</a></li>
                    <li><a href="18_reflection.html" class="block text-slate-400 hover:text-white transition">18. Reflection & Eval</a></li>
                    <li><a href="19_debugging_profiling.html" class="block text-slate-400 hover:text-white transition">19. Debugging & Profiling</a></li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 md:ml-64 p-8 max-w-4xl">
            <div class="mb-12">
                <h1 class="text-4xl font-bold text-white mb-6">Standard Library</h1>
                <p class="text-lg text-slate-400 leading-relaxed mb-8">
                    Nostos comes with a comprehensive standard library providing utilities for strings, collections, time, file system, cryptography, and more. All modules are available by default without imports.
                </p>

                <!-- Quick Reference -->
                <div class="bg-slate-800/50 rounded-lg p-6 mb-8 border border-slate-700">
                    <h3 class="text-lg font-semibold text-white mb-3">Available Modules</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-sm">
                        <span class="text-blue-400">String</span>
                        <span class="text-blue-400">Map</span>
                        <span class="text-blue-400">Set</span>
                        <span class="text-blue-400">Time</span>
                        <span class="text-blue-400">Random</span>
                        <span class="text-blue-400">Path</span>
                        <span class="text-blue-400">File</span>
                        <span class="text-blue-400">Dir</span>
                        <span class="text-blue-400">Env</span>
                        <span class="text-blue-400">Regex</span>
                        <span class="text-blue-400">Uuid</span>
                        <span class="text-blue-400">Crypto</span>
                        <span class="text-blue-400">Http</span>
                        <span class="text-blue-400">Json</span>
                        <span class="text-blue-400">Pg</span>
                        <span class="text-blue-400">Float32Array</span>
                        <span class="text-blue-400">Float64Array</span>
                        <span class="text-blue-400">Int64Array</span>
                    </div>
                    <p class="text-slate-500 text-xs mt-3">List functions (map, filter, fold, etc.) are available as methods on lists directly.</p>
                </div>

                <!-- String Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">String Module</h2>
                <p class="text-slate-400 mb-4">String manipulation functions for common text operations.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    # Length and case
    println("hello".length())          # 5
    println("hello".toUpper())         # "HELLO"
    println("WORLD".toLower())         # "world"

    # Searching
    println("hello".contains("ell"))   # true
    println("hello".startsWith("he"))  # true
    println("hello".endsWith("lo"))    # true
    println("hello".indexOf("l"))      # 2

    # Extraction
    println("hello".substring(1, 4))   # "ell"
    chars = "hello".chars()            # ['h', 'e', 'l', 'l', 'o']

    # Transformation
    println("  hi  ".trim())           # "hi"
    println("hello".replace("l", "L")) # "heLlo" (first only)
    println("ab".repeat(3))            # "ababab"
    println("hello".reverse())         # "olleh"

    # Split and join (use Regex)
    parts = Regex.split(",", "a,b,c")  # ["a", "b", "c"]
    println("hello".lines())           # Split by newlines
    println("hello world".words())     # Split by whitespace
}</code></pre>
                </div>

                <!-- Collections: Map -->
                <h2 class="text-2xl font-semibold text-white mb-4">Map Module</h2>
                <p class="text-slate-400 mb-4">Immutable key-value maps with efficient lookups.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    # Create a map
    m = %{"a": 1, "b": 2, "c": 3}

    # Basic operations
    println(m.get("a"))        # 1
    println(m.get("x"))        # () (unit if missing)
    println(m.contains("b"))   # true
    println(m.size())          # 3

    # Modification (returns new map)
    m2 = m.insert("d", 4)
    m3 = m2.remove("a")

    # Keys and values
    println(m.keys())          # ["a", "b", "c"]
    println(m.values())        # [1, 2, 3]
    println(m.toList())        # [("a", 1), ("b", 2), ("c", 3)]

    # From list of tuples
    pairs = [("x", 10), ("y", 20)]
    m4 = Map.fromList(pairs)
}</code></pre>
                </div>

                <!-- Collections: Set -->
                <h2 class="text-2xl font-semibold text-white mb-4">Set Module</h2>
                <p class="text-slate-400 mb-4">Immutable sets with unique elements.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    # Create a set
    s = #{1, 2, 3, 4, 5}

    # Basic operations
    println(s.contains(3))     # true
    println(s.size())          # 5

    # Modification (returns new set)
    s2 = s.insert(6)
    s3 = s2.remove(1)

    # Set operations
    a = #{1, 2, 3}
    b = #{2, 3, 4}
    println(a.union(b))        # #{1, 2, 3, 4}
    println(a.intersection(b)) # #{2, 3}
    println(a.difference(b))   # #{1}

    # Convert to list
    println(s.toList())        # [1, 2, 3, 4, 5]
}</code></pre>
                </div>

                <!-- Time Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">Time Module</h2>
                <p class="text-slate-400 mb-4">Date and time operations with Unix timestamps.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    # Current time
    now = Time.now()
    println("Timestamp: " ++ now.show())

    # Format as string
    println(now.format("%Y-%m-%d %H:%M:%S"))

    # Extract components
    println("Year: " ++ now.year().show())
    println("Month: " ++ now.month().show())
    println("Day: " ++ now.day().show())
    println("Hour: " ++ now.hour().show())
    println("Minute: " ++ now.minute().show())
    println("Second: " ++ now.second().show())

    # Parse from string
    ts = Time.parse("2024-06-15 10:30:00", "%Y-%m-%d %H:%M:%S")

    # Arithmetic (seconds)
    tomorrow = now.add(86400)
    yesterday = now.subtract(86400)
}</code></pre>
                </div>

                <!-- Random Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">Random Module</h2>
                <p class="text-slate-400 mb-4">Random number generation and selection.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    # Random integers in range [min, max]
    n = Random.int(1, 100)
    println("Random int: " ++ show(n))

    # Random float in [0, 1)
    f = Random.float()
    println("Random float: " ++ show(f))

    # Random boolean
    b = Random.bool()
    println("Random bool: " ++ show(b))

    # Pick random element from list
    colors = ["red", "green", "blue"]
    color = Random.choice(colors)
    println("Random color: " ++ color)

    # Shuffle a list
    nums = [1, 2, 3, 4, 5]
    shuffled = Random.shuffle(nums)
    println("Shuffled: " ++ show(shuffled))
}</code></pre>
                </div>

                <!-- Path Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">Path Module</h2>
                <p class="text-slate-400 mb-4">File path manipulation utilities.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    # Join path components
    println(Path.join("/home", "user"))       # "/home/user"
    println(Path.join("/home", "user", "docs")) # "/home/user/docs"

    # Extract components
    println(Path.dirname("/home/user/file.txt"))   # "/home/user"
    println(Path.basename("/home/user/file.txt"))  # "file.txt"
    println(Path.extension("document.pdf"))         # "pdf"

    # Path type checks
    println(Path.isAbsolute("/home"))   # true
    println(Path.isAbsolute("./file"))  # false
    println(Path.isRelative("./file"))  # true

    # Normalize path
    println(Path.normalize("/home/../etc"))  # "/etc"
}</code></pre>
                </div>

                <!-- Env Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">Env Module</h2>
                <p class="text-slate-400 mb-4">Access environment variables.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    # Get environment variable (returns Option)
    home = Env.get("HOME")
    match home
        Some(path) -> println("Home: " ++ path)
        None -> println("HOME not set")
    end

    # Get with default using unwrapOr
    editor = Env.get("EDITOR").unwrapOr("nano")
    println("Editor: " ++ editor)

    # Get all environment variables
    allEnv = Env.all()
    # Returns Map[String, String]

    # Current working directory
    cwd = Env.cwd()
    println("CWD: " ++ cwd)

    # Command line arguments
    args = Env.args()
    println("Args: " ++ show(args))
}</code></pre>
                </div>

                <!-- Regex Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">Regex Module</h2>
                <p class="text-slate-400 mb-4">Regular expression pattern matching.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    text = "The quick brown fox"

    # Check if pattern matches: matches(text, pattern)
    println(Regex.matches(text, "quick"))    # true
    println(Regex.matches(text, "slow"))     # false

    # Find first match: find(text, pattern)
    match Regex.find(text, "[a-z]+")
        Some(m) -> println("Found: " ++ m)   # "he"
        None -> println("No match")
    end

    # Find all matches: findAll(text, pattern)
    matches = Regex.findAll(text, "[a-zA-Z]+")
    println(matches)  # ["The", "quick", "brown", "fox"]

    # Replace: replace(text, pattern, replacement)
    result = Regex.replace(text, "fox", "dog")
    println(result)   # "The quick brown dog"

    # Split: split(text, pattern)
    parts = Regex.split(text, " ")
    println(parts)    # ["The", "quick", "brown", "fox"]
}</code></pre>
                </div>

                <!-- UUID Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">UUID Module</h2>
                <p class="text-slate-400 mb-4">Generate and validate UUIDs.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    # Generate a random UUID v4
    id = Uuid.v4()
    println("Generated UUID: " ++ id)
    # Example: "550e8400-e29b-41d4-a716-446655440000"

    # Validate UUID format
    println(Uuid.isValid(id))                           # true
    println(Uuid.isValid("not-a-uuid"))                 # false
    println(Uuid.isValid("550e8400-e29b-41d4-a716-446655440000")) # true
}</code></pre>
                </div>

                <!-- Crypto Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">Crypto Module</h2>
                <p class="text-slate-400 mb-4">Cryptographic hashing and password functions.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    # Hash functions (return hex strings)
    println(Crypto.sha256("hello"))
    # "2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824"

    println(Crypto.sha512("hello"))
    # "9b71d224bd62f3785d96d46ad3ea3d73..."

    println(Crypto.md5("hello"))  # Insecure, for compatibility
    # "5d41402abc4b2a76b9719d911017c592"

    # Password hashing with bcrypt
    password = "secret123"
    hash = Crypto.bcryptHash(password, 10)  # cost factor 10
    println("Hash: " ++ hash)

    # Verify password
    isValid = Crypto.bcryptVerify(password, hash)
    println("Valid: " ++ show(isValid))  # true

    isWrong = Crypto.bcryptVerify("wrong", hash)
    println("Wrong: " ++ show(isWrong))  # false

    # Generate random bytes (as hex)
    randomHex = Crypto.randomBytes(16)
    println("Random: " ++ randomHex)  # 32 hex chars
}</code></pre>
                </div>

                <div class="bg-slate-800/50 rounded-lg p-4 mb-8 border border-slate-700">
                    <p class="text-slate-400 text-sm"><strong>Security Note:</strong> Use bcrypt for password storage. MD5 is provided only for legacy compatibility and should not be used for security purposes. SHA-256/512 are suitable for data integrity checks.</p>
                </div>

                <!-- File Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">File Module</h2>
                <p class="text-slate-400 mb-4">File system operations for reading and writing files. All operations throw exceptions on error - use <code>try/catch</code> for error handling.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    # Write to file (throws on error)
    File.writeAll("/tmp/test.txt", "Hello, World!")

    # Read entire file (throws if file doesn't exist)
    content = File.readAll("/tmp/test.txt")
    println(content)  # "Hello, World!"

    # Check if file exists (returns Bool, doesn't throw)
    println(File.exists("/tmp/test.txt"))  # true

    # Get file size in bytes
    println(File.size("/tmp/test.txt"))  # 13

    # Delete file
    File.remove("/tmp/test.txt")

    # Error handling with try/catch
    try {
        data = File.readAll("/nonexistent.txt")
        println(data)
    } catch e ->
        println("File error: " ++ e)
    end

    # File handles for streaming access
    handle = File.open("/tmp/data.txt", "w")  # modes: "r", "w", "a", "rw"
    File.write(handle, "Line 1\n")
    File.write(handle, "Line 2\n")
    File.close(handle)
}</code></pre>
                </div>

                <!-- Dir Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">Dir Module</h2>
                <p class="text-slate-400 mb-4">Directory operations. Like file operations, these throw exceptions on error.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    # Create directory (throws if parent doesn't exist)
    Dir.create("/tmp/mydir")

    # Create nested directories (creates all parents)
    Dir.createAll("/tmp/nested/path/here")

    # List directory contents (returns [String])
    files = Dir.list("/tmp")
    println(files)  # List of filenames

    # Check if directory exists (returns Bool)
    println(Dir.exists("/tmp"))  # true

    # Remove empty directory
    Dir.remove("/tmp/mydir")

    # Remove directory and all contents recursively
    Dir.removeAll("/tmp/nested")

    # Error handling
    try {
        Dir.create("/root/forbidden")
    } catch e ->
        println("Permission denied: " ++ e)
    end
}</code></pre>
                </div>

                <!-- List Functions -->
                <h2 class="text-2xl font-semibold text-white mb-4">List Functions</h2>
                <p class="text-slate-400 mb-4">List operations are available as functions that support method chaining. These are defined in the standard library and automatically available.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos">main() = {
    xs = [1, 2, 3, 4, 5]

    # Access (head/tail are builtins)
    println(head(xs))             # 1
    println(tail(xs))             # [2, 3, 4, 5]
    println(last(xs))             # 5
    println(xs.get(2))            # 3 (0-indexed)

    # Transform with method chaining
    doubled = xs.map(x => x * 2)  # [2, 4, 6, 8, 10]
    evens = xs.filter(x => x % 2 == 0)  # [2, 4]
    sum = xs.fold(0, (acc, x) => acc + x)  # 15

    # More list operations
    println(xs.reverse())         # [5, 4, 3, 2, 1]
    println(xs.take(3))           # [1, 2, 3]
    println(xs.drop(2))           # [3, 4, 5]

    # Combine
    ys = [6, 7, 8]
    println(concat(xs, ys))       # [1, 2, 3, 4, 5, 6, 7, 8]
    println(flatten([[1,2], [3,4]]))  # [1, 2, 3, 4]

    # Search
    println(xs.contains(3))       # true
    println(xs.find(x => x > 3))  # Some(4)

    # Chained operations
    result = [1, 2, 3, 4, 5]
        .filter(x => x > 2)
        .map(x => x * 10)
        .fold(0, (a, b) => a + b)
    println(result)               # 120
}</code></pre>
                </div>

                <!-- PostgreSQL Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">Pg Module (PostgreSQL)</h2>
                <p class="text-slate-400 mb-4">Connect to PostgreSQL databases including cloud providers like Supabase and Neon.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos"># Connect to local PostgreSQL
conn = Pg.connect("host=localhost user=postgres password=secret dbname=mydb")

# Connect to cloud providers (Supabase, Neon) with TLS
conn = Pg.connect("postgresql://user:pass@db.xxx.supabase.co:5432/postgres?sslmode=require")
conn = Pg.connect("postgresql://user:pass@ep-xxx.neon.tech/neondb?sslmode=require")

# Query returns list of tuples - access fields with .0, .1, etc.
rows = Pg.query(conn, "SELECT id, name FROM users WHERE age > $1", [18])
# rows is: [(1, "Alice"), (2, "Bob")]
# Access: head(rows).0 => 1, head(rows).1 => "Alice"

# Parameters can be tuples (ideal for mixed types)
Pg.execute(conn, "INSERT INTO users (id, name, score) VALUES ($1, $2, $3)", (1, "Alice", 95.5))

# Or lists for single-type parameters
Pg.execute(conn, "INSERT INTO users (name) VALUES ($1)", ["Charlie"])

# Iterate over query results
rows = Pg.query(conn, "SELECT id, name, email FROM users", [])
rows.each(row => {
    println("User " ++ show(row.0) ++ ": " ++ row.1 ++ " <" ++ row.2 ++ ">")
})

# Transactions
Pg.begin(conn)
Pg.execute(conn, "UPDATE accounts SET balance = balance - 100 WHERE id = $1", [1])
Pg.commit(conn)  # or Pg.rollback(conn)

# JSON support (for JSONB columns)
Pg.execute(conn, "INSERT INTO docs (data) VALUES ($1)", ["{\"key\": \"value\"}"])

# Vector support (pgvector extension) - use Float32Array for native f32 format
embedding = Float32Array.fromList([0.1, 0.2, 0.3])
Pg.execute(conn, "INSERT INTO items (embedding) VALUES ($1)", [embedding])

# Query vectors - returned as Float32Array, access via tuple field
rows = Pg.query(conn, "SELECT embedding FROM items WHERE id = $1", [1])
vec = head(rows).0  # Float32Array (first field of first row)
values = Float32Array.toList(vec)  # Convert to list

# Similarity search (L2 distance)
query = Float32Array.fromList([0.1, 0.2, 0.3])
results = Pg.query(conn, "SELECT id, embedding <-> $1 as distance FROM items ORDER BY distance LIMIT 5", [query])

# Cosine similarity search
results = Pg.query(conn, "SELECT id, 1 - (embedding <=> $1) as similarity FROM items ORDER BY similarity DESC LIMIT 5", [query])

# Close connection
Pg.close(conn)</code></pre>
                </div>

                <!-- Connection Pooling -->
                <div class="bg-gradient-to-r from-blue-900/20 to-emerald-900/20 rounded-lg p-6 mb-8 border border-blue-800/30">
                    <h3 class="text-lg font-semibold text-white mb-3">Connection Pooling</h3>
                    <p class="text-slate-400 mb-4">
                        Nostos automatically pools PostgreSQL connections. When you call <code>Pg.close()</code>, the connection returns to the pool for reuse. Subsequent <code>Pg.connect()</code> calls to the same URL reuse pooled connections instead of creating new ones.
                    </p>
                    <div class="bg-nostos-code rounded-lg p-4 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos"># Connection reuse example
conn1 = Pg.connect("postgresql://localhost/mydb")
Pg.query(conn1, "SELECT 1", [])
Pg.close(conn1)  # Returns to pool

conn2 = Pg.connect("postgresql://localhost/mydb")  # Reuses pooled connection
Pg.query(conn2, "SELECT 2", [])
Pg.close(conn2)</code></pre>
                    </div>
                    <ul class="list-disc list-inside text-slate-400 mt-4 space-y-1">
                        <li><strong>Automatic:</strong> No configuration needed</li>
                        <li><strong>Per-URL pools:</strong> Each connection string gets its own pool</li>
                        <li><strong>TLS support:</strong> Works with local and cloud databases</li>
                    </ul>
                </div>

                <!-- Float32Array Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">Float32Array Module</h2>
                <p class="text-slate-400 mb-4">32-bit float arrays, ideal for AI/ML embeddings and pgvector. Native format for vector databases.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos"># Create from list
arr = Float32Array.fromList([1.0, 2.0, 3.0])

# Create with size and initial value
zeros = Float32Array.make(128, 0.0)  # 128-dim zero vector

# Access elements
len = Float32Array.length(arr)    # 3
val = Float32Array.get(arr, 0)    # 1.0

# Set returns new array (functional style)
arr2 = Float32Array.set(arr, 0, 99.0)

# Convert back to list
list = Float32Array.toList(arr)   # [1.0, 2.0, 3.0]</code></pre>
                </div>

                <!-- Float64Array Module -->
                <h2 class="text-2xl font-semibold text-white mb-4">Float64Array Module</h2>
                <p class="text-slate-400 mb-4">64-bit float arrays for high-precision numerical computing.</p>
                <div class="bg-nostos-code rounded-lg p-6 mb-8 border border-slate-800 overflow-x-auto">
<pre><code class="language-nostos"># Create from list
arr = Float64Array.fromList([1.0, 2.0, 3.0])

# Create with size and initial value
arr = Float64Array.make(100, 0.0)

# Access elements
len = Float64Array.length(arr)    # 3
val = Float64Array.get(arr, 0)    # 1.0

# Set returns new array (immutable)
arr2 = Float64Array.set(arr, 0, 99.0)

# Convert back to list
list = Float64Array.toList(arr)   # [1.0, 2.0, 3.0]</code></pre>
                </div>

                <!-- Summary Box -->
                <div class="bg-gradient-to-r from-blue-900/30 to-emerald-900/30 rounded-lg p-6 mb-8 border border-blue-800/50">
                    <h3 class="text-xl font-semibold text-white mb-4">Standard Library Summary</h3>
                    <p class="text-slate-400 mb-4">
                        The Nostos standard library provides everything needed for practical application development:
                    </p>
                    <ul class="list-disc list-inside text-slate-400 space-y-2">
                        <li><strong>Text:</strong> String, Regex for text processing</li>
                        <li><strong>Collections:</strong> Map, Set, and list functions (map, filter, fold)</li>
                        <li><strong>I/O:</strong> File, Dir for file system access</li>
                        <li><strong>System:</strong> Env, Path for system integration</li>
                        <li><strong>Time:</strong> Time for dates and timestamps</li>
                        <li><strong>Security:</strong> Crypto, Uuid for cryptographic operations</li>
                        <li><strong>Network:</strong> Http, Json for web services</li>
                        <li><strong>Database:</strong> Pg for PostgreSQL (with TLS, JSON, vectors)</li>
                        <li><strong>Random:</strong> Random for random number generation</li>
                        <li><strong>Arrays:</strong> Float32Array, Float64Array, Int64Array for typed arrays</li>
                    </ul>
                </div>

                <!-- Navigation -->
                <div class="mt-12 pt-8 border-t border-slate-800 flex justify-between">
                    <a href="14_json.html" class="text-blue-400 hover:text-blue-300 transition">&larr; Previous: JSON</a>
                    <a href="16_reflection.html" class="text-blue-400 hover:text-blue-300 transition">Next: Reflection & Eval &rarr;</a>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="../js/nostos-highlight.js"></script>
    <script>hljs.highlightAll();</script>

</body>
</html>
